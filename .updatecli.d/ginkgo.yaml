name: Bump onsi/ginkgo

actions:
  pull-request:
    title: Bump ginkgo package
    kind: github/pullrequest
    scmid: ci
    spec:
      parent: true

scms:
  ci:
    kind: github
    spec:
      user: "Elemental CI [bot]"
      email: elemental@suse.de
      owner: elemental-ci
      repository: elemental-cli
      token: '{{ requiredEnv "ELEMENTAL_BOT_GITHUB_TOKEN" }}'
      username: 'elemental-ci-bot'
      branch: "main"

sources:
  ginkgo:
    name: Update go.mod
    scmid: ci
    kind: shell
    spec:
      command: |
        go get -u github.com/onsi/ginkgo/v2
        go get -u github.com/onsi/gomega
        go mod tidy && \
        go mod vendor && \
        cat go.mod
      environments:
        - name: PATH
        - name: GOPATH

targets:
  go.mod:
    name: ginkgo
    kind: file
    spec:
        file: go.mod
    scmid: ci
    sourceid: ginkgo
